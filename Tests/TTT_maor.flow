blockdiag {
initialization_code="
global X
X = lambda i : 'X'+str(i)

global O
O=lambda i : 'O'+str(i)

global perm3
perm3 = lambda a : [[a[0],a[1],a[2]],[a[0],a[2],a[1]],[a[1],a[0],a[2]],[a[2],a[0],a[1]], [a[1],a[2],a[0]],[a[2],a[1],a[0]]]

global Path
Path = [['1','2','3'],['4','5','6'],['7','8','9'],['1','4','7'],['2','5','8'],['3','6','9'],['1','5','9'],['3','5','7']]

global Lines
Lines =[]
for p in Path:
    Lines.extend(perm3(p))

global All
All= lambda A:[A(i) for i in range(1,9)]

global AllMove
AllMove=lambda : All(X) + All(O)


"
    st3 -> rq3;

    st3 [type=startBP, initial="[{'path':path} for path in Path ]", width=400];
    rq3 [type=syncBP, req="['Player X wins']", block="AllMove()"]





    st2 -> rqX1  ;

    st2 [type=startBP, initial="[{'i':i }for i in range(1,4)]", width=400];
    rqX1[type = syncBP , req="[X(i)]"]






}
